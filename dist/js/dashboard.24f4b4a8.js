(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"149a":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"channel"}},[a("router-view")],1)},n=[],r={},i=r,o=a("2877"),l=Object(o["a"])(i,s,n,!1,null,null,null);e["default"]=l.exports},"1bdc":function(t,e,a){},"2cb0":function(t,e,a){"use strict";var s=a("1bdc"),n=a.n(s);n.a},6954:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pa-4",attrs:{id:"dashboard"}},[a("v-container",{attrs:{fluid:""}},[a("div",{staticClass:"d-flex justify-space-between mb-5"},[a("h2",[t._v("channel dashboard")]),a("div",{staticClass:"right"},[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[a("v-btn",t._g({staticClass:"mr-4 white",attrs:{icon:""},on:{click:function(e){t.dialog=!0}}},Object.assign({},s)),[a("v-icon",{staticClass:"small",attrs:{size:"25"}},[t._v("mdi-upload")])],1)]}}])},[a("span",[t._v("Upload video")])])],1)]),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-card",{staticClass:"mx-auto",attrs:{outlined:""}},[a("v-card-title",{staticClass:"pl-5"},[t._v("Recent subscribers")]),a("v-card-actions",{staticClass:"d-block ml-2"},[a("v-btn",{attrs:{color:"blue",text:""},on:{click:function(e){t.subscribersDialog=!0}}},[t._v(" See all ")])],1)],1)],1)],1)],1),a("upload-video-modal",{attrs:{"open-dialog":t.dialog},on:{closeDialog:function(e){t.dialog=!1}}}),a("subscribers-modal",{attrs:{"open-dialog":t.subscribersDialog},on:{closeDialog:function(e){t.subscribersDialog=!1}}})],1)},n=[],r=a("3f2e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{persistent:"",transition:"fab-transition","max-width":"800"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",{attrs:{tile:""}},[a("div",{staticClass:"d-flex justify-space-between mb-5"},[a("v-card-title",{staticClass:"py-3"},[t._v("Subscribers")]),a("v-btn",{attrs:{icon:"",text:""},on:{click:t.closeModal}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-card-text",{staticClass:"px-3"},[a("v-row",[a("v-col",{staticClass:"pt-0 px-0",attrs:{cols:"12",sm:"12",md:"12",lg:"12"}},[a("v-data-table",{attrs:{headers:t.headers,items:t.subscribers,loading:t.loading,"sort-by":"calories"},scopedSlots:t._u([{key:"item.channel",fn:function(e){var s=e.item;return[a("v-avatar",{staticClass:"white--text",attrs:{size:"35",color:"red"}},["no-photo.jpg"!==s.subscriberId.photoUrl?[a("img",{attrs:{src:t.getUrl+"/uploads/avatars/"+s.subscriberId.photoUrl,alt:s.subscriberId.photoUrl+" avatar"}})]:a("span",{staticClass:"headline"},[t._v(" "+t._s(s.subscriberId.channelName.split("")[0].toUpperCase())+" ")])],2),a("span",{staticClass:"pl-2"},[t._v(t._s(s.subscriberId.channelName))])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.initialize}},[t._v("Reset")])]},proxy:!0}])})],1)],1)],1)],1)],1)},o=[],l=(a("d3b7"),a("96cf"),a("1da1")),c=a("5530"),d=a("2f62"),u=a("e7f4"),b={name:"SubscribersModal",props:["openDialog"],data:function(){return{headers:[{text:"Channel",align:"start",value:"channel"},{text:"Date Subscribed",value:"createdAt"},{text:"Subcriber count",value:"subscriberId.subscribers"}],subscribers:[],loading:!0}},computed:Object(c["a"])({},Object(d["b"])(["getUrl"]),{dialog:function(){return this.openDialog}}),methods:{getSubscribers:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,u["a"].getSubscribers(0).catch((function(t){return console.log(t)})).finally((function(){t.loading=!1}));case 3:if(a=e.sent,a){e.next=6;break}return e.abrupt("return");case 6:t.subscribers=a.data.data;case 7:case"end":return e.stop()}}),e)})))()},subscribe:function(t){console.log(t)},closeModal:function(){this.$emit("closeDialog")}},mounted:function(){this.getSubscribers()}},h=b,v=a("2877"),p=a("6544"),f=a.n(p),m=a("8212"),g=a("8336"),w=a("b0af"),x=a("99d9"),C=a("62ad"),_=a("8fea"),V=a("169a"),y=a("132d"),j=a("0fd9"),k=Object(v["a"])(h,i,o,!1,null,null,null),S=k.exports;f()(k,{VAvatar:m["a"],VBtn:g["a"],VCard:w["a"],VCardText:x["c"],VCardTitle:x["d"],VCol:C["a"],VDataTable:_["a"],VDialog:V["a"],VIcon:y["a"],VRow:j["a"]});var O={data:function(){return{loading:!0,dialog:!1,subscribersDialog:!1}},components:{UploadVideoModal:r["a"],SubscribersModal:S},mounted:function(){}},I=O,U=(a("af5b"),a("a523")),A=a("3a2f"),D=Object(v["a"])(I,s,n,!1,null,null,null);e["default"]=D.exports;f()(D,{VBtn:g["a"],VCard:w["a"],VCardActions:x["a"],VCardTitle:x["d"],VCol:C["a"],VContainer:U["a"],VIcon:y["a"],VRow:j["a"],VTooltip:A["a"]})},"71a8":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"channel-home"}},[a("v-parallax",{attrs:{height:"230",src:"https://cdn.vuetifyjs.com/images/parallax/material.jpg"}}),a("div",{staticClass:"nav-bgcolor"},[a("div",{attrs:{id:"channel-header"}},[a("v-container",{staticClass:"py-0"},[a("v-row",{staticClass:"justify-space-between"},[a("v-col",{attrs:{cols:"12",sm:"5",md:"5",lg:"5","offset-md":"1"}},[a("v-skeleton-loader",{staticClass:"mr-1",attrs:{type:"list-item-avatar-two-line",loading:t.loading}},[a("v-card",{staticClass:"transparent",attrs:{flat:""}},[a("v-list-item",{attrs:{"three-line":""}},[a("v-list-item-avatar",{attrs:{size:"80"}},["no-photo.jpg"!==t.channel.photoUrl?a("v-img",{attrs:{src:t.url+"/uploads/avatars/"+t.channel.photoUrl}}):a("v-avatar",{attrs:{color:"red",size:"60"}},[a("span",{staticClass:"white--text headline "},[t._v(" "+t._s(t.channel.channelName.split("")[0].toUpperCase()))])])],1),a("v-list-item-content",{staticClass:"align-self-auto"},[a("v-list-item-title",{staticClass:"headline mb-1"},[t._v(t._s(t.channel.channelName))]),a("v-list-item-subtitle",[t._v(t._s(t.channel.subscribers)+" subscribers ")])],1)],1)],1)],1)],1),t.loading?t._e():a("v-col",{attrs:{cols:"12",sm:"5",md:"3",lg:"3"}},[t.currentUser&&t.channel._id!==t.currentUser._id||t.showSubBtn?a("v-btn",{class:[{"red white--text":!t.subscribed},{"grey grey--text lighten-3 text--darken-3":t.subscribed},"mt-6"],attrs:{tile:"",large:"",depressed:"",loading:t.subscribeLoading},on:{click:t.subscribe}},[t._v(t._s(t.subscribed?"subscribed":"subscribe"))]):t._e()],1)],1)],1)],1),a("v-card",{staticClass:"transparent",attrs:{flat:""}},[a("v-tabs",{attrs:{"background-color":"transparent","show-arrows":"",centered:"","center-active":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.items,(function(e,s){return a("v-tab",{key:s},[t._v(" "+t._s(e)+" ")])})),1),a("v-container",{attrs:{fluid:""}},[a("v-tabs-items",{staticClass:"transparent",model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab-item",[a("v-card",{staticClass:"transparent",attrs:{flat:""}},[a("v-card-title",[t._v("Uploads")]),a("v-slide-group",{staticClass:"pa-4",attrs:{multiple:"","show-arrows":""}},t._l(t.loading?5:t.videos.data,(function(e,s){return a("v-slide-item",{key:s},[a("v-skeleton-loader",{staticClass:"mr-1",attrs:{type:"card-avatar",loading:t.loading,width:"250px"}},[a("video-card",{attrs:{card:{maxWidth:250,type:"noAvatar"},video:e,channel:e.userId}})],1)],1)})),1)],1)],1),a("v-tab-item",[a("v-card",{staticClass:"transparent",attrs:{flat:""}},[a("v-card-title",[t._v("Uploads")]),a("v-row",t._l(t.loading?10:t.videos.data,(function(e,s){return a("v-col",{key:s,staticClass:"mx-xs-auto",attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[a("v-skeleton-loader",{attrs:{type:"card-avatar",loading:t.loading}},[a("video-card",{attrs:{card:{maxWidth:350},video:e,channel:e.userId}})],1)],1)})),1)],1)],1)],1)],1)],1)],1),a("signin-modal",{attrs:{openModal:t.signinDialog,details:t.details},on:{closeModal:function(e){t.signinDialog=!1}}})],1)},n=[],r=(a("d3b7"),a("96cf"),a("1da1")),i=a("5530"),o=a("2f62"),l=a("3f4a"),c={getAll:function(t){return Object(l["a"])().get("users/?".concat(t))},getById:function(t){return Object(l["a"])().get("users/".concat(t))},createUser:function(t){return Object(l["a"])().post("users",t)},updateUser:function(t,e){return Object(l["a"])().put("users/".concat(e),t)},deleteById:function(t){return Object(l["a"])().delete("users/".concat(t))}},d=a("7b4e"),u=a("e7f4"),b=a("829b"),h=a("931e"),v={data:function(){return{tab:null,loading:!1,errored:!1,subscribed:!1,subscribeLoading:!1,showSubBtn:!0,url:"",items:["Home","Videos","Playlists","Community","Channels","about"],videos:{},channel:{},signinDialog:!1,details:{}}},computed:Object(i["a"])({},Object(o["b"])(["isAuthenticated","currentUser"])),components:{VideoCard:b["a"],SigninModal:h["a"]},methods:{getChannel:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.loading=!0,e.errored=!1,a.next=4,c.getById(t).catch((function(t){e.errored=!0,console.log(t),e.$router.push("/")})).finally((function(){return e.loading=!1}));case 4:if(s=a.sent,s){a.next=7;break}return a.abrupt("return");case 7:e.channel=s.data.data,e.currentUser&&e.currentUser._id===e.channel._id?e.showSubBtn=!1:e.showSubBtn=!0,e.getVideos(),e.checkSubscription(e.channel._id);case 11:case"end":return a.stop()}}),a)})))()},getVideos:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,d["a"].getAll("public",{userId:t.channel._id}).catch((function(e){console.log(e),t.errored=!0})).finally((function(){return t.loading=!1}));case 3:if(a=e.sent,"undefined"!==typeof a){e.next=6;break}return e.abrupt("return");case 6:t.videos=a.data;case 7:case"end":return e.stop()}}),e)})))()},checkSubscription:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.currentUser){a.next=2;break}return a.abrupt("return");case 2:return e.loading=!0,a.next=5,u["a"].checkSubscription({channelId:t}).catch((function(t){console.log(t)})).finally((function(){e.loading=!1}));case 5:if(s=a.sent,s){a.next=8;break}return a.abrupt("return");case 8:s.data.data._id?e.subscribed=!0:e.subscribed=!1;case 9:case"end":return a.stop()}}),a)})))()},subscribe:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isAuthenticated){e.next=4;break}return t.signinDialog=!0,t.details={title:"Want to subscribe to this channel?",text:"Sign in to subscribe to this channel."},e.abrupt("return");case 4:return t.subscribeLoading=!0,e.next=7,u["a"].createSubscription({channelId:t.channel._id}).catch((function(t){return console.log(t)})).finally((function(){t.subscribeLoading=!1}));case 7:if(a=e.sent,a){e.next=10;break}return e.abrupt("return");case 10:a.data.data._id?(t.subscribed=!0,t.channel.subscribers++):(t.subscribed=!1,t.channel.subscribers--);case 11:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.getChannel(this.$route.params.id)},beforeRouteUpdate:function(t,e,a){this.getChannel(t.params.id),a()}},p=v,f=(a("2cb0"),a("2877")),m=a("6544"),g=a.n(m),w=a("8212"),x=a("8336"),C=a("b0af"),_=a("99d9"),V=a("62ad"),y=a("a523"),j=a("adda"),k=a("da13"),S=a("8270"),O=a("5d23"),I=(a("a9e3"),a("94aa"),a("2b0e")),U=I["a"].extend({name:"translatable",props:{height:Number},data:function(){return{elOffsetTop:0,parallax:0,parallaxDist:0,percentScrolled:0,scrollTop:0,windowHeight:0,windowBottom:0}},computed:{imgHeight:function(){return this.objHeight()}},beforeDestroy:function(){window.removeEventListener("scroll",this.translate,!1),window.removeEventListener("resize",this.translate,!1)},methods:{calcDimensions:function(){var t=this.$el.getBoundingClientRect();this.scrollTop=window.pageYOffset,this.parallaxDist=this.imgHeight-this.height,this.elOffsetTop=t.top+this.scrollTop,this.windowHeight=window.innerHeight,this.windowBottom=this.scrollTop+this.windowHeight},listeners:function(){window.addEventListener("scroll",this.translate,!1),window.addEventListener("resize",this.translate,!1)},objHeight:function(){throw new Error("Not implemented !")},translate:function(){this.calcDimensions(),this.percentScrolled=(this.windowBottom-this.elOffsetTop)/(parseInt(this.height)+this.windowHeight),this.parallax=Math.round(this.parallaxDist*this.percentScrolled)}}}),A=a("58df"),D=Object(A["a"])(U),T=D.extend().extend({name:"v-parallax",props:{alt:{type:String,default:""},height:{type:[String,Number],default:500},src:String},data:function(){return{isBooted:!1}},computed:{styles:function(){return{display:"block",opacity:this.isBooted?1:0,transform:"translate(-50%, ".concat(this.parallax,"px)")}}},mounted:function(){this.init()},methods:{init:function(){var t=this,e=this.$refs.img;e&&(e.complete?(this.translate(),this.listeners()):e.addEventListener("load",(function(){t.translate(),t.listeners()}),!1),this.isBooted=!0)},objHeight:function(){return this.$refs.img.naturalHeight}},render:function(t){var e={staticClass:"v-parallax__image",style:this.styles,attrs:{src:this.src,alt:this.alt},ref:"img"},a=t("div",{staticClass:"v-parallax__image-container"},[t("img",e)]),s=t("div",{staticClass:"v-parallax__content"},this.$slots.default);return t("div",{staticClass:"v-parallax",style:{height:"".concat(this.height,"px")},on:this.$listeners},[a,s])}}),R=a("0fd9"),B=a("3129"),L=a("7efd"),$=a("ade3"),E=a("4e82"),H=a("d9bd"),M=I["a"].extend({props:{activeClass:String,value:{required:!1}},data:function(){return{isActive:!1}},methods:{toggle:function(){this.isActive=!this.isActive}},render:function(){return this.$scopedSlots.default?(this.$scopedSlots.default&&(t=this.$scopedSlots.default({active:this.isActive,toggle:this.toggle})),Array.isArray(t)&&1===t.length&&(t=t[0]),t&&!Array.isArray(t)&&t.tag?(t.data=this._b(t.data||{},t.tag,{class:Object($["a"])({},this.activeClass,this.isActive)}),t):(Object(H["c"])("v-item should only contain a single element",this),t)):(Object(H["c"])("v-item is missing a default scopedSlot",this),null);var t}}),N=(Object(A["a"])(M,Object(E["a"])("itemGroup","v-item","v-item-group")).extend({name:"v-item"}),Object(A["a"])(M,Object(E["a"])("slideGroup")).extend({name:"v-slide-item"})),z=a("71a3"),W=a("c671"),q=a("fe57"),G=a("aac8"),F=Object(f["a"])(p,s,n,!1,null,null,null);e["default"]=F.exports;g()(F,{VAvatar:w["a"],VBtn:x["a"],VCard:C["a"],VCardTitle:_["d"],VCol:V["a"],VContainer:y["a"],VImg:j["a"],VListItem:k["a"],VListItemAvatar:S["a"],VListItemContent:O["a"],VListItemSubtitle:O["b"],VListItemTitle:O["c"],VParallax:T,VRow:R["a"],VSkeletonLoader:B["a"],VSlideGroup:L["b"],VSlideItem:N,VTab:z["a"],VTabItem:W["a"],VTabs:q["a"],VTabsItems:G["a"]})},"81ec":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pa-4",attrs:{id:"studio"}},[a("router-view")],1)},n=[],r={},i=r,o=a("2877"),l=Object(o["a"])(i,s,n,!1,null,null,null);e["default"]=l.exports},"829b":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"content-bg card mx-auto",attrs:{"max-width":t.card.maxWidth,flat:"",tile:"",router:"",to:"/watch/"+t.video._id}},[a("v-img",{attrs:{src:t.url+"/uploads/thumbnails/"+t.video.thumbnailUrl}}),a("v-row",{attrs:{"no-gutters":""}},["noAvatar"!=t.card.type?a("v-col",{attrs:{cols:"2"}},[a("v-list-item",{staticClass:"pl-0 pt-3",attrs:{router:"",to:"/channels/"+t.channel._id}},[a("v-list-item-avatar",["no-photo.jpg"!==t.channel.photoUrl?a("v-img",{staticClass:"elevation-6",attrs:{src:t.url+"/uploads/avatars/"+t.channel.photoUrl}}):a("v-avatar",{attrs:{color:"red"}},[a("span",{staticClass:"white--text headline "},[t._v(" "+t._s(t.channel.channelName.split("")[0].toUpperCase()))])])],1)],1)],1):t._e(),a("v-col",[a("v-card-title",{staticClass:"pl-2 pt-3 subtitle-1 font-weight-bold",staticStyle:{"line-height":"1.2rem"}},[t._v(" "+t._s(t.video.title)+" ")]),a("v-card-subtitle",{staticClass:"pl-2 pb-0"},[t._v(" "+t._s(t.channel.name)+" ")]),a("v-card-subtitle",{staticClass:"pl-2 pt-0"},[t._v(" "+t._s(t.video.views)+" views"),a("v-icon",[t._v("mdi-circle-small")]),t._v(t._s(t.dateFormatter(t.video.createdAt))+" ")],1)],1)],1)],1)},n=[],r=a("c1df"),i=a.n(r),o={name:"VideoCard",props:{video:{type:Object,required:!0},channel:{type:Object,required:!0},card:Object},data:function(){return{url:""}},methods:{dateFormatter:function(t){return i()(t).fromNow()}}},l=o,c=a("2877"),d=a("6544"),u=a.n(d),b=a("8212"),h=a("b0af"),v=a("99d9"),p=a("62ad"),f=a("132d"),m=a("adda"),g=a("da13"),w=a("8270"),x=a("0fd9"),C=Object(c["a"])(l,s,n,!1,null,null,null);e["a"]=C.exports;u()(C,{VAvatar:b["a"],VCard:h["a"],VCardSubtitle:v["b"],VCardTitle:v["d"],VCol:p["a"],VIcon:f["a"],VImg:m["a"],VListItem:g["a"],VListItemAvatar:w["a"],VRow:x["a"]})},"939d":function(t,e,a){},"94aa":function(t,e,a){},af5b:function(t,e,a){"use strict";var s=a("939d"),n=a.n(s);n.a}}]);
//# sourceMappingURL=dashboard.24f4b4a8.js.map